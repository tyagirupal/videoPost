<app-navbar></app-navbar>

<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-8">
      <mat-card class="card-soft p-4 text-center">
        <h1 class="h4 mb-2 text-white">Upload your video</h1>
        <p class="text-muted mb-4">Click to choose a file or drag & drop here</p>

        <!-- Drop zone -->
        <div
          class="dropzone mx-auto"
          [class.dropzone--active]="isDragging"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
        >
          <div class="dz-inner">
            <mat-icon class="dz-icon">cloud_upload</mat-icon>
            <div class="dz-text">
              <div class="fw-semibold">Drag & drop your video</div>
              <div class="text-muted small">MP4 or MOV • up to {{ maxSizeMB }} MB</div>
            </div>

            <button mat-stroked-button color="primary" class="mt-3" (click)="fileInput.click()">
              Choose file
            </button>

            <input
              #fileInput
              type="file"
              accept="video/mp4,video/quicktime"
              class="d-none"
              (change)="onFileInput($event)"
            />
          </div>
        </div>

        <!-- Selected file info -->
        <div *ngIf="fileName" class="mt-3 text-start">
          <div class="text-white">
            <mat-icon class="me-1">movie</mat-icon>
            <strong>{{ fileName }}</strong>
            <span class="text-muted">({{ fileSizeMB }} MB)</span>
          </div>
        </div>

        <!-- Progress -->
        <div *ngIf="reading" class="mt-3">
          <mat-progress-bar mode="determinate" [value]="progress"></mat-progress-bar>
          <div class="small text-muted mt-1">{{ progress | number:'1.0-0' }}%</div>
        </div>

        <!-- Error -->
        <div *ngIf="errorMsg" class="alert alert-danger mt-3 py-2">
          {{ errorMsg }}
        </div>

        <!-- Hint -->
        <div class="text-muted small mt-4">
          We don’t upload yet — we convert locally to Base64, then navigate to <code>/upload-details</code>.
        </div>
      </mat-card>
    </div>
  </div>
</div>
